package net.dreamlu.mica.ddddocr.core.test;

import net.dreamlu.mica.ddddocr.core.OCREngine;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import org.springframework.core.io.DefaultResourceLoader;

import java.io.IOException;

/**
 * OCR 引擎测试类
 *
 * @author L.cm
 */
public class OCREngineTest {

	@Test
	void testDetectBase64Image() throws IOException {
		String imageValue = "SHTP";
		String base64 = "data:image/png;base64,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";
		try (OCREngine ocrEngine = new OCREngine(new DefaultResourceLoader())) {
			String detected = ocrEngine.detectBase64Image(base64);
			Assertions.assertEquals(imageValue, detected);
		}
	}

}
